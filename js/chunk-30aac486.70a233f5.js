(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-30aac486"],{"5ae4":function(t,e,r){"use strict";r("ded4")},bc91:function(t,e,r){"use strict";r.r(e);var a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("b-card-group",{attrs:{deck:""}},[r("b-card",{attrs:{"header-tag":"header",title:""}},[r("validation-observer",{ref:"simpleRules"},[r("b-form",{ref:"form",staticClass:"repeater-form",style:{height:t.trHeight}},[r("b-row",[r("b-col",{attrs:{cols:"7"}},[r("b-form-group",{attrs:{label:"سؤال الاستبيان","label-for":"title"}},[r("validation-provider",{attrs:{name:"title",rules:"required"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.errors;return[r("b-form-input",{attrs:{id:"title",state:!(a.length>0)&&null,placeholder:"اسم الاستبيان"},model:{value:t.title,callback:function(e){t.title=e},expression:"title"}}),r("small",{staticClass:"text-danger"},[t._v(t._s(a[0]))])]}}])})],1)],1),r("b-col",{attrs:{md:"3"}},[r("b-form-group",{attrs:{label:"اخر التصنيف","label-for":"category"}},[r("validation-provider",{attrs:{name:"category",rules:"required"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.errors;return[r("b-form-select",{attrs:{id:"category",placeholder:"اختار التصنيف","value-field":"id","text-field":"name",options:t.categories,state:!(a.length>0)&&null},model:{value:t.CategoryId,callback:function(e){t.CategoryId=e},expression:"CategoryId"}}),r("small",{staticClass:"text-danger"},[t._v(t._s(a[0]))])]}}])})],1)],1),r("b-col",{attrs:{cols:"2"}},[r("b-button",{staticClass:"mt-2",attrs:{variant:"primary"},on:{click:function(e){return t.add()}}},[r("feather-icon",{staticClass:"mr-25",attrs:{icon:"PlusIcon"}}),t._v(" إضافة حقل اجابة ")],1)],1),t._l(t.inputs,(function(e,a){return r("b-col",{key:a,ref:"row",refInFor:!0,attrs:{cols:"12"}},[r("hr",{staticClass:"w-100"}),r("b-row",[r("b-col",{attrs:{cols:"md-8"}},[r("b-form-group",{attrs:{label:"إجابة الاستبيان","label-for":"answer"}},[r("validation-provider",{attrs:{name:"answer"+a,rules:"required"},scopedSlots:t._u([{key:"default",fn:function(i){var n=i.errors;return[r("b-form-input",{attrs:{id:"answer",name:"answer"+a,state:!(n.length>0)&&null,placeholder:"إجابة الاستبيان"},model:{value:e.answer,callback:function(r){t.$set(e,"answer",r)},expression:"input.answer"}}),r("small",{staticClass:"text-danger"},[t._v(t._s(n[0]))])]}}],null,!0)})],1)],1),r("b-col",{attrs:{cols:"md-2"}},[r("b-form-group",{attrs:{label:"درجة الاستبيان","label-for":"points"}},[r("validation-provider",{attrs:{name:"points"+a,rules:"required"},scopedSlots:t._u([{key:"default",fn:function(i){var n=i.errors;return[r("b-form-input",{attrs:{id:"points",type:"number",name:"points"+a,state:!(n.length>0)&&null,placeholder:"درجة الاستبيان"},model:{value:e.points,callback:function(r){t.$set(e,"points",r)},expression:"input.points"}}),r("small",{staticClass:"text-danger"},[t._v(t._s(n[0]))])]}}],null,!0)})],1)],1),r("b-col",{attrs:{cols:"2"}},[r("b-button",{directives:[{name:"show",rawName:"v-show",value:a||!a&&t.inputs.length>1,expression:"k || ( !k && inputs.length > 1)"}],staticClass:"mt-2 btn-sm",attrs:{id:"k",variant:"outline-danger"},on:{click:function(e){return e.stopPropagation(),t.remove(a)}}},[r("feather-icon",{staticClass:"mr-25",attrs:{icon:"XIcon"}}),t._v(" حذف ")],1)],1)],1)],1)})),r("hr",{staticClass:"w-100"})],2)],1),r("b-row",[r("b-col",{attrs:{cols:"12"}},[r("b-button",{attrs:{variant:"primary",type:"submit"},on:{click:function(e){return e.preventDefault(),t.validationForm(e)}}},[r("feather-icon",{staticClass:"mr-25",attrs:{icon:"EditIcon"}}),t._v(" حفظ تعديلات الاستبيان ")],1)],1)],1)],1)],1)],1)],1)},i=[],n=(r("159b"),r("a434"),r("7bb1")),s=r("8f03"),o=r("205f"),l=r("5cce"),c=r("1947"),u=r("4797"),d=r("8226"),p=r("8361"),f=r("11de"),h=r("a15b"),m=r("b28b"),b=r("223c"),v=r("bf9a"),g={ar:{names:{title:"سؤال الاستبيان",answer:"إجابة الاستبيان",points:"درجة الاستبيان"}}};Object(n["d"])("ar",g.ar);var w={name:"EditQuestionnaire",components:{ValidationProvider:n["b"],ValidationObserver:n["a"],BCard:o["a"],BCardGroup:l["a"],BButton:c["a"],BFormInput:u["a"],BFormGroup:d["a"],BFormSelect:p["a"],BForm:f["a"],BRow:h["a"],BCol:m["a"]},mixins:[v["a"]],data:function(){return{show:!1,CategoryId:null,categories:[],inputs:[],title:"",options:[],required:s["c"],numeric:s["b"]}},mounted:function(){this.initTrHeight()},created:function(){window.addEventListener("resize",this.initTrHeight),this.fetchCategories(),this.fetchData()},destroyed:function(){window.removeEventListener("resize",this.initTrHeight)},methods:{fetchCategories:function(){var t=this;this.$store.dispatch("categories/fetch").then((function(e){t.categories=e.data.data}))},fetchData:function(){var t=this;null!==this.id&&this.$store.dispatch("questionnaire/show",this.$route.params.id).then((function(e){t.obj=e.data.data,t.title=t.obj.title,t.CategoryId=t.obj.category_id,t.obj.options.forEach((function(e){t.inputs.push({answer:e.title,points:e.points}),t.$nextTick((function(){t.trAddHeight(t.$refs.row[0].offsetHeight)}))}))}))},add:function(){var t=this;this.inputs.push({answer:"",points:""}),this.$nextTick((function(){t.trAddHeight(t.$refs.row[0].offsetHeight)}))},remove:function(t){this.inputs.splice(t,1),this.trTrimHeight(this.$refs.row[0].offsetHeight)},initTrHeight:function(){var t=this;this.trSetHeight(null),this.$nextTick((function(){t.trSetHeight(t.$refs.form.scrollHeight)}))},validationForm:function(){var t=this;this.$refs.simpleRules.validate().then((function(e){if(e){var r=new FormData;r.append("questionnaire_id",t.$route.params.id),r.append("category_id",t.CategoryId),r.append("title",t.title),t.inputs.forEach((function(t,e){r.append("options[".concat(e,"][option]"),t.answer),r.append("options[".concat(e,"][point]"),t.points)})),t.$store.dispatch("questionnaire/edit",r).then((function(){t.$toast({component:b["a"],props:{title:"تم تحديث الاستبيان بنجاح",icon:"CheckCircleIcon",variant:"success"}}),t.$router.push("/questionnaires")}))}}))}}},C=w,k=(r("5ae4"),r("2877")),y=Object(k["a"])(C,a,i,!1,null,"edc328fe",null);e["default"]=y.exports},ded4:function(t,e,r){}}]);
//# sourceMappingURL=chunk-30aac486.70a233f5.js.map